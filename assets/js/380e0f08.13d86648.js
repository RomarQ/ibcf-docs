"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[261],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>v});var a=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(r),f=o,v=d["".concat(l,".").concat(f)]||d[f]||u[f]||n;return r?a.createElement(v,i(i({ref:t},p),{},{components:r})):a.createElement(v,i({ref:t},p))}));function v(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,i=new Array(n);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<n;c++)i[c]=r[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}f.displayName="MDXCreateElement"},2768:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>f,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var a=r(87462),o=(r(67294),r(3905)),n=r(50941),i=r(44996);const s={title:"Overview",slug:"/relay-contracts",hide_title:!0},l=void 0,c={unversionedId:"relay-contracts/overview",id:"relay-contracts/overview",title:"Overview",description:"Relaying Tezos to EVM",source:"@site/docs/relay-contracts/overview.mdx",sourceDirName:"relay-contracts",slug:"/relay-contracts",permalink:"/ibcf-docs/relay-contracts",draft:!1,editUrl:"https://github.com/airgap-it/ibcf-docs/docs/relay-contracts/overview.mdx",tags:[],version:"current",frontMatter:{title:"Overview",slug:"/relay-contracts",hide_title:!0},sidebar:"docs",previous:{title:"Introduction",permalink:"/ibcf-docs/"},next:{title:"State Aggregator",permalink:"/ibcf-docs/relay-contracts/tezos/state"}},p={},d=[{value:"Relaying Tezos to EVM",id:"relaying-tezos-to-evm",level:2},{value:"Relaying EVM to Tezos",id:"relaying-evm-to-tezos",level:2},{value:"Decentralization",id:"decentralization",level:2}],u={toc:d};function f(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"relaying-tezos-to-evm"},"Relaying Tezos to EVM"),(0,o.kt)("p",null,"The relaying process from Tezos to EVM involves interacting with two contracts (a ",(0,o.kt)("a",{parentName:"p",href:"/relay-contracts/tezos/state"},"State Aggregator")," and a ",(0,o.kt)("a",{parentName:"p",href:"/relay-contracts/evm/validator"},"Proof Validator"),")."),(0,o.kt)("center",null,(0,o.kt)(n.Z,{width:"480px",sources:{light:(0,i.Z)("/img/ibcf-relay-tezos-evm.svg"),dark:(0,i.Z)("/img/ibcf-relay-tezos-evm-dark.svg")},mdxType:"ThemedImage"})),(0,o.kt)("div",{class:"padding-vert--md"}),(0,o.kt)("p",null,"The \ud83d\udcd2 ",(0,o.kt)("a",{parentName:"p",href:"/relay-contracts/tezos/state"},(0,o.kt)("strong",{parentName:"a"},"State aggregation"))," contract acts as a database and proof generator for other contracts in the Tezos ecosystem.\nIt produces a snapshot of a Merkle tree every ",(0,o.kt)("inlineCode",{parentName:"p"},"X")," blocks, where the root node of the tree is used to validate all the proofs for the given snapshot."),(0,o.kt)("p",null,"The origin contract address is included on every added state to authenticate the proofs on the EVM chain."),(0,o.kt)("p",null,"The root node hash (or ",(0,o.kt)("strong",{parentName:"p"},"state root"),") of every snapshot is then transmitted to an EVM contract (\ud83d\udc6e\u200d\u2642\ufe0f ",(0,o.kt)("a",{parentName:"p",href:"/relay-contracts/evm/validator"},(0,o.kt)("strong",{parentName:"a"},"Proof Validator")),"), which allows the contracts on the EVM environment to validate the proofs of \u2709\ufe0f states added on Tezos at a given snapshot."),(0,o.kt)("h2",{id:"relaying-evm-to-tezos"},"Relaying EVM to Tezos"),(0,o.kt)("p",null,"Relaying from an EVM chain to Tezos, requires the EVM chain to be ",(0,o.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1186"},"EIP-1186")," enabled and a Tezos (\ud83d\udc6e\u200d\u2642\ufe0f ",(0,o.kt)("a",{parentName:"p",href:"/relay-contracts/tezos/validator"},(0,o.kt)("strong",{parentName:"a"},"Proof Validator")),") contract capable of validating ",(0,o.kt)("inlineCode",{parentName:"p"},"EIP-1186")," storage proofs."),(0,o.kt)("center",null,(0,o.kt)(n.Z,{width:"480px",sources:{light:(0,i.Z)("/img/ibcf-relay-evm-tezos.svg"),dark:(0,i.Z)("/img/ibcf-relay-evm-tezos-dark.svg")},mdxType:"ThemedImage"})),(0,o.kt)("div",{class:"padding-vert--md"}),(0,o.kt)("p",null,"The relayer first asks the Tezos (\ud83d\udc6e\u200d\u2642\ufe0f ",(0,o.kt)("a",{parentName:"p",href:"/relay-contracts/tezos/validator"},(0,o.kt)("strong",{parentName:"a"},"EIP-1186 Proof Validator")),") which snapshot/block level it is expecting, then queries the state root of that level and sends it to the validator."),(0,o.kt)("p",null,"Applications can then leverage ",(0,o.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1186"},"EIP-1186")," for producing storage proofs of EVM contracts that get validated on Tezos."),(0,o.kt)("h2",{id:"decentralization"},"Decentralization"),(0,o.kt)("p",null,"The relaying solution is not trustless. Applications building on top of it need to trust that at least 51% of the validators are not faulty."))}f.isMDXComponent=!0}}]);